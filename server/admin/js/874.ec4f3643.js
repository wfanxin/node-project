"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[874],{5314:function(e,l,a){a.d(l,{P:function(){return u},g:function(){return s}});var t=a(5603);const u=t.Z.defaults.baseURL+"/upload",s={Authorization:`Bearer ${localStorage.token||""}`}},5874:function(e,l,a){a.r(l),a.d(l,{default:function(){return w}});a(7658);var t=a(3396),u=a(7139),s=a(4870),o=a(2483),d=a(7178),m=a(2748),i=a(5314);const n=["src"],r=["src"];var p={__name:"HeroEdit",props:{id:String},setup(e){const l=e,{proxy:a}=(0,t.FN)(),p=(0,o.tv)(),c=(0,s.qj)({scores:{},skills:[]}),w=e=>{a.$http.get(`rest/heros/${e}`).then((e=>{c.name=e.data.name,c.avatar=e.data.avatar,c.title=e.data.title,c.categories=e.data.categories,c.scores=e.data.scores,c.items1=e.data.items1,c.items2=e.data.items2,c.usageTips=e.data.usageTips,c.battleTips=e.data.battleTips,c.teamTips=e.data.teamTips,c.skills=e.data.skills}))},f=e=>{c.avatar=e.url},V=()=>{l.id?a.$http.put(`rest/heros/${l.id}`,c).then((()=>{p.push("/heros/list"),(0,d.z8)({message:"操作成功",type:"success"})})):a.$http.post("rest/heros",c).then((()=>{p.push("/heros/list"),(0,d.z8)({message:"操作成功",type:"success"})}))},W=(0,s.qj)({categories:[],items:[]}),_=()=>{a.$http.get("rest/categories").then((e=>{W.categories=e.data}))},g=()=>{a.$http.get("rest/items").then((e=>{W.items=e.data}))};let b=(0,s.iH)("基础信息");return _(),g(),l.id&&w(l.id),(e,a)=>{const o=(0,t.up)("el-input"),d=(0,t.up)("el-form-item"),p=(0,t.up)("el-option"),w=(0,t.up)("el-select"),_=(0,t.up)("el-rate"),g=(0,t.up)("el-icon"),h=(0,t.up)("el-upload"),v=(0,t.up)("el-tab-pane"),U=(0,t.up)("el-button"),k=(0,t.up)("el-col"),y=(0,t.up)("el-row"),x=(0,t.up)("el-tabs"),T=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("h1",null,(0,u.zw)(l.id?"编辑":"新建")+"英雄",1),(0,t.Wm)(T,{model:c,"label-width":"150px",style:{"max-width":"1000px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{modelValue:(0,s.SU)(b),"onUpdate:modelValue":a[13]||(a[13]=e=>(0,s.dq)(b)?b.value=e:b=e),type:"border-card"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{label:"基础信息",name:"基础信息"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{modelValue:c.name,"onUpdate:modelValue":a[0]||(a[0]=e=>c.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"称号"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{modelValue:c.title,"onUpdate:modelValue":a[1]||(a[1]=e=>c.title=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:c.categories,"onUpdate:modelValue":a[2]||(a[2]=e=>c.categories=e),multiple:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(W.categories,(e=>((0,t.wg)(),(0,t.j4)(p,{key:e._id,label:e.name,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"难度"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{max:10,"show-score":"",modelValue:c.scores.difficult,"onUpdate:modelValue":a[3]||(a[3]=e=>c.scores.difficult=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"技能"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{max:10,"show-score":"",modelValue:c.scores.skills,"onUpdate:modelValue":a[4]||(a[4]=e=>c.scores.skills=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"攻击"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{max:10,"show-score":"",modelValue:c.scores.attack,"onUpdate:modelValue":a[5]||(a[5]=e=>c.scores.attack=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"生存"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{max:10,"show-score":"",modelValue:c.scores.survive,"onUpdate:modelValue":a[6]||(a[6]=e=>c.scores.survive=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"顺风出装"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:c.items1,"onUpdate:modelValue":a[7]||(a[7]=e=>c.items1=e),multiple:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(W.items,(e=>((0,t.wg)(),(0,t.j4)(p,{key:e._id,label:e.name,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"逆风出装"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:c.items2,"onUpdate:modelValue":a[8]||(a[8]=e=>c.items2=e),multiple:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(W.items,(e=>((0,t.wg)(),(0,t.j4)(p,{key:e._id,label:e.name,value:e._id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"使用技巧"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"textarea",modelValue:c.usageTips,"onUpdate:modelValue":a[9]||(a[9]=e=>c.usageTips=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"对抗技巧"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"textarea",modelValue:c.battleTips,"onUpdate:modelValue":a[10]||(a[10]=e=>c.battleTips=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"团战思路"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"textarea",modelValue:c.teamTips,"onUpdate:modelValue":a[11]||(a[11]=e=>c.teamTips=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"头像"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"avatar-uploader",action:(0,s.SU)(i.P),headers:(0,s.SU)(i.g),"show-file-list":!1,"on-success":f},{default:(0,t.w5)((()=>[c.avatar?((0,t.wg)(),(0,t.iD)("img",{key:0,src:c.avatar,class:"avatar"},null,8,n)):((0,t.wg)(),(0,t.j4)(g,{key:1,class:"avatar-uploader-icon"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,s.SU)(m.v37))])),_:1}))])),_:1},8,["action","headers"])])),_:1})])),_:1}),(0,t.Wm)(v,{label:"技能",name:"技能"},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{onClick:a[12]||(a[12]=e=>c.skills.push({}))},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,s.SU)(m.v37))])),_:1}),(0,t.Uk)("添加技能")])),_:1}),(0,t.Wm)(y,{type:"flex",style:{"flex-wrap":"wrap"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c.skills,((e,l)=>((0,t.wg)(),(0,t.j4)(k,{md:12,key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(d,{label:"图标"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"avatar-uploader",action:(0,s.SU)(i.P),headers:(0,s.SU)(i.g),"show-file-list":!1,"on-success":l=>e.icon=l.url},{default:(0,t.w5)((()=>[e.icon?((0,t.wg)(),(0,t.iD)("img",{key:0,src:e.icon,class:"avatar"},null,8,r)):((0,t.wg)(),(0,t.j4)(g,{key:1,class:"avatar-uploader-icon"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,s.SU)(m.v37))])),_:1}))])),_:2},1032,["action","headers","on-success"])])),_:2},1024),(0,t.Wm)(d,{label:"描述"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"textarea",modelValue:e.description,"onUpdate:modelValue":l=>e.description=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(d,{label:"小提示"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{type:"textarea",modelValue:e.tips,"onUpdate:modelValue":l=>e.tips=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,{size:"small",type:"danger",onClick:e=>c.skills.splice(l,1)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(d,{style:{"margin-top":"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{type:"primary",onClick:V},{default:(0,t.w5)((()=>[(0,t.Uk)("提交")])),_:1})])),_:1})])),_:1},8,["model"])])}}};const c=p;var w=c}}]);
//# sourceMappingURL=874.ec4f3643.js.map