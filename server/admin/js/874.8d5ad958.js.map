{"version":3,"file":"js/874.8d5ad958.js","mappings":"8KAGO,MAAMA,EAAYC,EAAAA,EAAAA,SAAAA,QAAwB,UAGpCC,EAAiB,CAC1BC,cAAgB,UAASC,aAAaC,OAAS,K,+OCqGzC,MAAEC,IAAUC,EAAAA,EAAAA,MAEZC,GAASC,EAAAA,EAAAA,MAGTC,GAAOC,EAAAA,EAAAA,IAAS,CAClBC,OAAQ,CAAC,EACTC,OAAQ,KASNC,EAASC,IACXT,EAAMU,MAAMC,IAAK,cAAaF,KAAMG,MAAMC,IACtCT,EAAKU,KAAOD,EAAIE,KAAKD,KACrBV,EAAKY,OAASH,EAAIE,KAAKC,OACvBZ,EAAKa,MAAQJ,EAAIE,KAAKE,MACtBb,EAAKc,WAAaL,EAAIE,KAAKG,WAC3Bd,EAAKE,OAASO,EAAIE,KAAKT,OACvBF,EAAKe,OAASN,EAAIE,KAAKI,OACvBf,EAAKgB,OAASP,EAAIE,KAAKK,OACvBhB,EAAKiB,UAAYR,EAAIE,KAAKM,UAC1BjB,EAAKkB,WAAaT,EAAIE,KAAKO,WAC3BlB,EAAKmB,SAAWV,EAAIE,KAAKQ,SACzBnB,EAAKG,OAASM,EAAIE,KAAKR,MAAM,GAC/B,EAGAiB,EAAuBX,IACzBT,EAAKY,OAASH,EAAIY,GAAG,EAInBC,EAAW,KACTC,EAAMlB,GACNT,EAAMU,MAAMkB,IAAK,cAAaD,EAAMlB,KAAML,GAAMQ,MAAK,KACjDV,EAAO2B,KAAK,gBACZC,EAAAA,EAAAA,IAAU,CACNC,QAAS,OACTC,KAAM,WACR,IAGNhC,EAAMU,MAAMuB,KAAK,aAAc7B,GAAMQ,MAAK,KACtCV,EAAO2B,KAAK,gBACZC,EAAAA,EAAAA,IAAU,CACNC,QAAS,OACTC,KAAM,WACR,GAEV,EAIEjB,GAAOV,EAAAA,EAAAA,IAAS,CAClBa,WAAY,GACZgB,MAAO,KAILC,EAAkB,KACpBnC,EAAMU,MAAMC,IAAI,mBAAmBC,MAAMC,IACrCE,EAAKG,WAAaL,EAAIE,IAAI,GAC5B,EAIAqB,EAAa,KACfpC,EAAMU,MAAMC,IAAI,cAAcC,MAAMC,IAChCE,EAAKmB,MAAQrB,EAAIE,IAAI,GACvB,EAGN,IAAIsB,GAAaC,EAAAA,EAAAA,IAAI,Q,OAGrBH,IAGAC,IAGAT,EAAMlB,IAAMD,EAAMmB,EAAMlB,I,4qLC7L5B,MAAM8B,EAAc,EAEpB,O","sources":["webpack://admin/./src/upload.js","webpack://admin/./src/views/HeroEdit.vue","webpack://admin/./src/views/HeroEdit.vue?8175"],"sourcesContent":["import http from './http'\r\n\r\n// upload地址\r\nexport const uploadUrl = http.defaults.baseURL + '/upload'\r\n\r\n// upload用户登录验证\r\nexport const getAuthHeaders = {\r\n    Authorization: `Bearer ${localStorage.token || ''}`\r\n}","<template>\r\n    <div>\r\n        <h1>{{ props.id ? '编辑' : '新建' }}英雄</h1>\r\n        <el-form :model=\"form\" label-width=\"150px\" style=\"max-width: 1000px\">\r\n            <el-tabs v-model=\"activeName\" type=\"border-card\">\r\n                <el-tab-pane label=\"基础信息\" name=\"基础信息\">\r\n                    <el-form-item label=\"名称\">\r\n                        <el-input v-model=\"form.name\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"称号\">\r\n                        <el-input v-model=\"form.title\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"类型\">\r\n                        <el-select v-model=\"form.categories\" multiple>\r\n                            <el-option :key=\"item._id\" :label=\"item.name\" :value=\"item._id\" v-for=\"item in data.categories\" />\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"难度\">\r\n                        <el-rate :max=\"10\" show-score v-model=\"form.scores.difficult\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"技能\">\r\n                        <el-rate :max=\"10\" show-score v-model=\"form.scores.skills\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"攻击\">\r\n                        <el-rate :max=\"10\" show-score v-model=\"form.scores.attack\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"生存\">\r\n                        <el-rate :max=\"10\" show-score v-model=\"form.scores.survive\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"顺风出装\">\r\n                        <el-select v-model=\"form.items1\" multiple>\r\n                            <el-option :key=\"item._id\" :label=\"item.name\" :value=\"item._id\" v-for=\"item in data.items\" />\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"逆风出装\">\r\n                        <el-select v-model=\"form.items2\" multiple>\r\n                            <el-option :key=\"item._id\" :label=\"item.name\" :value=\"item._id\" v-for=\"item in data.items\" />\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"使用技巧\">\r\n                        <el-input type=\"textarea\" v-model=\"form.usageTips\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"对抗技巧\">\r\n                        <el-input type=\"textarea\" v-model=\"form.battleTips\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"团战思路\">\r\n                        <el-input type=\"textarea\" v-model=\"form.teamTips\" />\r\n                    </el-form-item>\r\n                    <el-form-item label=\"头像\">\r\n                        <el-upload\r\n                            class=\"avatar-uploader\"\r\n                            :action=\"uploadUrl\"\r\n                            :headers=\"getAuthHeaders\"\r\n                            :show-file-list=\"false\"\r\n                            :on-success=\"handleAvatarSuccess\"\r\n                        >\r\n                            <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\" />\r\n                            <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n                        </el-upload>\r\n                    </el-form-item>\r\n                </el-tab-pane>\r\n                <el-tab-pane label=\"技能\" name=\"技能\">\r\n                    <el-button @click=\"form.skills.push({})\"><el-icon><Plus /></el-icon>添加技能</el-button>\r\n                    <el-row type=\"flex\" style=\"flex-wrap: wrap;\">\r\n                        <el-col :md=\"12\" v-for=\"(item, i) in form.skills\" :key=\"i\">\r\n                            <el-form-item label=\"名称\">\r\n                                <el-input v-model=\"item.name\" /> \r\n                            </el-form-item>\r\n                            <el-form-item label=\"图标\">\r\n                                <el-upload\r\n                                    class=\"avatar-uploader\"\r\n                                    :action=\"uploadUrl\"\r\n                                    :headers=\"getAuthHeaders\"\r\n                                    :show-file-list=\"false\"\r\n                                    :on-success=\"res => item.icon = res.url\"\r\n                                >\r\n                                    <img v-if=\"item.icon\" :src=\"item.icon\" class=\"avatar\" />\r\n                                    <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n                                </el-upload>\r\n                            </el-form-item>\r\n                            <el-form-item label=\"描述\">\r\n                                <el-input type=\"textarea\" v-model=\"item.description\" />\r\n                            </el-form-item>\r\n                            <el-form-item label=\"小提示\">\r\n                                <el-input type=\"textarea\" v-model=\"item.tips\" />\r\n                            </el-form-item>\r\n                            <el-form-item>\r\n                                <el-button size=\"small\" type=\"danger\" @click=\"form.skills.splice(i, 1)\">删除</el-button>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n            \r\n            <el-form-item style=\"margin-top: 20px;\">\r\n                <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { reactive, getCurrentInstance, defineProps, ref } from 'vue'\r\n    import { useRouter } from 'vue-router'\r\n    import { ElMessage } from 'element-plus'\r\n    import { Plus } from '@element-plus/icons-vue'\r\n    import { uploadUrl, getAuthHeaders } from '../upload'\r\n\r\n    const { proxy } = getCurrentInstance() // 获取当前实例\r\n\r\n    const router = useRouter() // 获取router\r\n\r\n    // 定义对象变量\r\n    const form = reactive({\r\n        scores: {},\r\n        skills: []\r\n    })\r\n\r\n    // 指定props变量\r\n    const props = defineProps({\r\n        id: String\r\n    })\r\n\r\n    // 定义获取详情函数\r\n    const fetch = (id) => {\r\n        proxy.$http.get(`rest/heros/${id}`).then((res)=>{\r\n            form.name = res.data.name\r\n            form.avatar = res.data.avatar\r\n            form.title = res.data.title\r\n            form.categories = res.data.categories\r\n            form.scores = res.data.scores\r\n            form.items1 = res.data.items1\r\n            form.items2 = res.data.items2\r\n            form.usageTips = res.data.usageTips\r\n            form.battleTips = res.data.battleTips\r\n            form.teamTips = res.data.teamTips\r\n            form.skills = res.data.skills\r\n        })\r\n    }\r\n\r\n    const handleAvatarSuccess = (res) => {\r\n        form.avatar = res.url\r\n    }\r\n\r\n    // 定义提交函数\r\n    const onSubmit = () => {\r\n        if (props.id) {\r\n            proxy.$http.put(`rest/heros/${props.id}`, form).then(() => {\r\n                router.push('/heros/list')\r\n                ElMessage({\r\n                    message: '操作成功',\r\n                    type: 'success',\r\n                })\r\n            })\r\n        } else {\r\n            proxy.$http.post('rest/heros', form).then(() => {\r\n                router.push('/heros/list')\r\n                ElMessage({\r\n                    message: '操作成功',\r\n                    type: 'success',\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    // 定义数据变量\r\n    const data = reactive({\r\n        categories: [],\r\n        items: []\r\n    })\r\n\r\n    // 定义获取类型函数\r\n    const fetchCategories = () => {\r\n        proxy.$http.get('rest/categories').then((res)=>{\r\n            data.categories = res.data\r\n        })\r\n    }\r\n\r\n    // 定义获取物品函数\r\n    const fetchItems = () => {\r\n        proxy.$http.get('rest/items').then((res)=>{\r\n            data.items = res.data\r\n        })\r\n    }\r\n\r\n    let activeName = ref('基础信息')\r\n\r\n    // 执行函数\r\n    fetchCategories()\r\n\r\n    // 执行函数\r\n    fetchItems()\r\n\r\n    // 有id则执行函数\r\n    props.id && fetch(props.id)\r\n</script>\r\n\r\n<style>\r\n    .avatar-uploader .avatar {\r\n        width: 100px;\r\n        height: 100px;\r\n        display: block;\r\n    }\r\n\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed var(--el-border-color);\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n        transition: var(--el-transition-duration-fast);\r\n    }\r\n\r\n    .avatar-uploader .el-upload:hover {\r\n        border-color: var(--el-color-primary);\r\n    }\r\n\r\n    .el-icon.avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 100px;\r\n        height: 100px;\r\n        text-align: center;\r\n    }\r\n</style>\r\n","import script from \"./HeroEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HeroEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HeroEdit.vue?vue&type=style&index=0&id=5cc903ad&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["uploadUrl","http","getAuthHeaders","Authorization","localStorage","token","proxy","getCurrentInstance","router","useRouter","form","reactive","scores","skills","fetch","id","$http","get","then","res","name","data","avatar","title","categories","items1","items2","usageTips","battleTips","teamTips","handleAvatarSuccess","url","onSubmit","props","put","push","ElMessage","message","type","post","items","fetchCategories","fetchItems","activeName","ref","__exports__"],"sourceRoot":""}