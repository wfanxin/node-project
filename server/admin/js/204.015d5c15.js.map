{"version":3,"file":"js/204.015d5c15.js","mappings":"8KAGO,MAAMA,EAAYC,EAAAA,EAAAA,SAAAA,QAAwB,UAGpCC,EAAiB,CAC1BC,cAAgB,UAASC,aAAaC,OAAS,K,qOC0BzC,MAAEC,IAAUC,EAAAA,EAAAA,MAEZC,GAASC,EAAAA,EAAAA,MAGTC,GAAOC,EAAAA,EAAAA,IAAS,CAAC,GAQjBC,EAASC,IACXP,EAAMQ,MAAMC,IAAK,cAAaF,KAAMG,MAAMC,IACtCP,EAAKQ,KAAOD,EAAIE,KAAKD,KACrBR,EAAKU,KAAOH,EAAIE,KAAKC,IAAI,GAC3B,EAGAC,EAAuBJ,IACzBP,EAAKU,KAAOH,EAAIK,GAAG,EAIjBC,EAAW,KACTC,EAAMX,GACNP,EAAMQ,MAAMW,IAAK,cAAaD,EAAMX,KAAMH,GAAMM,MAAK,KACjDR,EAAOkB,KAAK,gBACZC,EAAAA,EAAAA,IAAU,CACNC,QAAS,OACTC,KAAM,WACR,IAGNvB,EAAMQ,MAAMgB,KAAK,aAAcpB,GAAMM,MAAK,KACtCR,EAAOkB,KAAK,gBACZC,EAAAA,EAAAA,IAAU,CACNC,QAAS,OACTC,KAAM,WACR,GAEV,E,OAIJL,EAAMX,IAAMD,EAAMY,EAAMX,I,+jCC1E5B,MAAMkB,EAAc,EAEpB,O","sources":["webpack://admin/./src/upload.js","webpack://admin/./src/views/ItemEdit.vue","webpack://admin/./src/views/ItemEdit.vue?6cfd"],"sourcesContent":["import http from './http'\r\n\r\n// upload地址\r\nexport const uploadUrl = http.defaults.baseURL + '/upload'\r\n\r\n// upload用户登录验证\r\nexport const getAuthHeaders = {\r\n    Authorization: `Bearer ${localStorage.token || ''}`\r\n}","<template>\r\n    <div>\r\n        <h1>{{ props.id ? '编辑' : '新建' }}物品</h1>\r\n        <el-form :model=\"form\" label-width=\"200px\" style=\"max-width: 1000px\">\r\n            <el-form-item label=\"名称\">\r\n                <el-input v-model=\"form.name\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"图标\">\r\n                <el-upload\r\n                    class=\"avatar-uploader\"\r\n                    :action=\"uploadUrl\"\r\n                    :headers=\"getAuthHeaders\"\r\n                    :show-file-list=\"false\"\r\n                    :on-success=\"handleAvatarSuccess\"\r\n                >\r\n                    <img v-if=\"form.icon\" :src=\"form.icon\" class=\"avatar\" />\r\n                    <el-icon v-else class=\"avatar-uploader-icon\"><Plus /></el-icon>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { reactive, getCurrentInstance, defineProps } from 'vue'\r\n    import { useRouter } from 'vue-router'\r\n    import { ElMessage } from 'element-plus'\r\n    import { Plus } from '@element-plus/icons-vue'\r\n    import { uploadUrl, getAuthHeaders } from '../upload'\r\n\r\n    const { proxy } = getCurrentInstance() // 获取当前实例\r\n\r\n    const router = useRouter() // 获取router\r\n\r\n    // 定义对象变量\r\n    const form = reactive({})\r\n\r\n    // 指定props变量\r\n    const props = defineProps({\r\n        id: String\r\n    })\r\n\r\n    // 定义获取详情函数\r\n    const fetch = (id) => {\r\n        proxy.$http.get(`rest/items/${id}`).then((res)=>{\r\n            form.name = res.data.name\r\n            form.icon = res.data.icon\r\n        })\r\n    }\r\n\r\n    const handleAvatarSuccess = (res) => {\r\n        form.icon = res.url\r\n    }\r\n\r\n    // 定义提交函数\r\n    const onSubmit = () => {\r\n        if (props.id) {\r\n            proxy.$http.put(`rest/items/${props.id}`, form).then(() => {\r\n                router.push('/items/list')\r\n                ElMessage({\r\n                    message: '操作成功',\r\n                    type: 'success',\r\n                })\r\n            })\r\n        } else {\r\n            proxy.$http.post('rest/items', form).then(() => {\r\n                router.push('/items/list')\r\n                ElMessage({\r\n                    message: '操作成功',\r\n                    type: 'success',\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    // 有id则执行函数\r\n    props.id && fetch(props.id)\r\n</script>\r\n\r\n<style>\r\n    .avatar-uploader .avatar {\r\n        width: 100px;\r\n        height: 100px;\r\n        display: block;\r\n    }\r\n\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed var(--el-border-color);\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n        transition: var(--el-transition-duration-fast);\r\n    }\r\n\r\n    .avatar-uploader .el-upload:hover {\r\n        border-color: var(--el-color-primary);\r\n    }\r\n\r\n    .el-icon.avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 100px;\r\n        height: 100px;\r\n        text-align: center;\r\n    }\r\n</style>\r\n","import script from \"./ItemEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ItemEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ItemEdit.vue?vue&type=style&index=0&id=55fa0a17&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["uploadUrl","http","getAuthHeaders","Authorization","localStorage","token","proxy","getCurrentInstance","router","useRouter","form","reactive","fetch","id","$http","get","then","res","name","data","icon","handleAvatarSuccess","url","onSubmit","props","put","push","ElMessage","message","type","post","__exports__"],"sourceRoot":""}