{"version":3,"file":"js/744.bd44f6ed.js","mappings":"mRAwBU,MAAEA,IAAUC,EAAAA,EAAAA,MAEZC,GAASC,EAAAA,EAAAA,MAGTC,GAAOC,EAAAA,EAAAA,IAAS,CAAC,GAGjBC,GAAOD,EAAAA,EAAAA,IAAS,CAClBE,QAAS,KASPC,EAASC,IACXT,EAAMU,MAAMC,IAAK,mBAAkBF,KAAMG,MAAMC,IAC3CT,EAAKU,KAAOD,EAAIP,KAAKQ,KACrBV,EAAKW,OAASF,EAAIP,KAAKS,MAAM,GAC/B,EAIAC,EAAe,KACjBhB,EAAMU,MAAMC,IAAI,mBAAmBC,MAAMC,IACrCP,EAAKC,QAAUM,EAAIP,IAAI,GACzB,EAIAW,EAAW,KACTC,EAAMT,GACNT,EAAMU,MAAMS,IAAK,mBAAkBD,EAAMT,KAAML,GAAMQ,MAAK,KACtDV,EAAOkB,KAAK,qBACZC,EAAAA,EAAAA,IAAU,CACNC,QAAS,OACTC,KAAM,WACR,IAGNvB,EAAMU,MAAMc,KAAK,kBAAmBpB,GAAMQ,MAAK,KAC3CV,EAAOkB,KAAK,qBACZC,EAAAA,EAAAA,IAAU,CACNC,QAAS,OACTC,KAAM,WACR,GAEV,E,OAIJL,EAAMT,IAAMD,EAAMU,EAAMT,IAGxBO,I,4+BC9EJ,MAAMS,EAAc,EAEpB,O","sources":["webpack://admin/./src/views/CategoryEdit.vue","webpack://admin/./src/views/CategoryEdit.vue?3148"],"sourcesContent":["<template>\r\n    <div>\r\n        <h1>{{ props.id ? '编辑' : '新建' }}分类</h1>\r\n        <el-form :model=\"form\" label-width=\"200px\" style=\"max-width: 1000px\">\r\n            <el-form-item label=\"上级分类\">\r\n                <el-select v-model=\"form.parent\">\r\n                    <el-option :key=\"item._id\" :label=\"item.name\" :value=\"item._id\" v-for=\"item in data.parents\" />\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"名称\">\r\n                <el-input v-model=\"form.name\" />\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit\">提交</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { reactive, getCurrentInstance, defineProps } from 'vue'\r\n    import { useRouter } from 'vue-router'\r\n    import { ElMessage } from 'element-plus'\r\n\r\n    const { proxy } = getCurrentInstance() // 获取当前实例\r\n\r\n    const router = useRouter() // 获取router\r\n\r\n    // 定义对象变量\r\n    const form = reactive({})\r\n\r\n    // 定义对象变量\r\n    const data = reactive({\r\n        parents: []\r\n    })\r\n\r\n    // 指定props变量\r\n    const props = defineProps({\r\n        id: String\r\n    })\r\n\r\n    // 定义获取详情函数\r\n    const fetch = (id) => {\r\n        proxy.$http.get(`rest/categories/${id}`).then((res)=>{\r\n            form.name = res.data.name\r\n            form.parent = res.data.parent\r\n        })\r\n    }\r\n\r\n    // 定义获取上级分类函数\r\n    const fetchParents = () => {\r\n        proxy.$http.get('rest/categories').then((res)=>{\r\n            data.parents = res.data\r\n        })\r\n    }\r\n\r\n    // 定义提交函数\r\n    const onSubmit = () => {\r\n        if (props.id) { // 编辑\r\n            proxy.$http.put(`rest/categories/${props.id}`, form).then(() => {\r\n                router.push('/categories/list')\r\n                ElMessage({\r\n                    message: '操作成功',\r\n                    type: 'success',\r\n                })\r\n            })\r\n        } else { // 新增\r\n            proxy.$http.post('rest/categories', form).then(() => {\r\n                router.push('/categories/list')\r\n                ElMessage({\r\n                    message: '操作成功',\r\n                    type: 'success',\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    // 有id则执行函数\r\n    props.id && fetch(props.id)\r\n\r\n    // 执行函数\r\n    fetchParents()\r\n</script>\r\n","import script from \"./CategoryEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CategoryEdit.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["proxy","getCurrentInstance","router","useRouter","form","reactive","data","parents","fetch","id","$http","get","then","res","name","parent","fetchParents","onSubmit","props","put","push","ElMessage","message","type","post","__exports__"],"sourceRoot":""}