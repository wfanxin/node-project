"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[979],{5314:function(e,l,a){a.d(l,{P:function(){return u},g:function(){return s}});var t=a(5603);const u=t.Z.defaults.baseURL+"/upload",s={Authorization:`Bearer ${localStorage.token||""}`}},9979:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});a(7658);var t=a(3396),u=a(7139),s=a(4870),n=a(2483),d=a(7178),m=a(2748),o=a(5314);const i=["src"];var r={__name:"AdEdit",props:{id:String},setup(e){const l=e,{proxy:a}=(0,t.FN)(),r=(0,n.tv)(),p=(0,s.qj)({items:[]}),c=e=>{a.$http.get(`rest/ads/${e}`).then((e=>{p.name=e.data.name,p.items=e.data.items}))},f=()=>{l.id?a.$http.put(`rest/ads/${l.id}`,p).then((()=>{r.push("/ads/list"),(0,d.z8)({message:"操作成功",type:"success"})})):a.$http.post("rest/ads",p).then((()=>{r.push("/ads/list"),(0,d.z8)({message:"操作成功",type:"success"})}))};return l.id&&c(l.id),(e,a)=>{const n=(0,t.up)("el-input"),d=(0,t.up)("el-form-item"),r=(0,t.up)("el-icon"),c=(0,t.up)("el-button"),w=(0,t.up)("el-upload"),_=(0,t.up)("el-col"),g=(0,t.up)("el-row"),h=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("h1",null,(0,u.zw)(l.id?"编辑":"新建")+"广告位",1),(0,t.Wm)(h,{model:p,"label-width":"200px"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"名称"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:p.name,"onUpdate:modelValue":a[0]||(a[0]=e=>p.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{label:"广告"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{onClick:a[1]||(a[1]=e=>p.items.push({}))},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,s.SU)(m.v37))])),_:1}),(0,t.Uk)("添加广告")])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{type:"flex",style:{"flex-wrap":"wrap"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(p.items,((e,l)=>((0,t.wg)(),(0,t.j4)(_,{md:12,key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"跳转链接（URL）"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:e.url,"onUpdate:modelValue":l=>e.url=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(d,{label:"图片",style:{"margin-top":"10px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{class:"avatar-uploader",action:(0,s.SU)(o.P),headers:(0,s.SU)(o.g),"show-file-list":!1,"on-success":l=>e.image=l.url},{default:(0,t.w5)((()=>[e.image?((0,t.wg)(),(0,t.iD)("img",{key:0,src:e.image,class:"avatar"},null,8,i)):((0,t.wg)(),(0,t.j4)(r,{key:1,class:"avatar-uploader-icon"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,s.SU)(m.v37))])),_:1}))])),_:2},1032,["action","headers","on-success"])])),_:2},1024),(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{size:"small",type:"danger",onClick:e=>p.items.splice(l,1)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{type:"primary",onClick:f},{default:(0,t.w5)((()=>[(0,t.Uk)("提交")])),_:1})])),_:1})])),_:1},8,["model"])])}}};const p=r;var c=p}}]);
//# sourceMappingURL=979.4ab5e2a2.js.map